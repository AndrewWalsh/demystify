import{d as N,aI as R,ah as V,c as z,K as b,B as l,z as p,Y as B,az as O,C as n,D as i,u as r,$ as E,Q as u,F as $,R as A,a0 as K,bl as q,U as j,a2 as _,V as G,af as F,an as Q,at as T,aG as S}from"./index-XT8p-Ppy.js";import{d as Y}from"./LibraryIcon.vue-ibYip0im.js";import{r as H}from"./EmptyState.vue-DeQ0gt8o.js";import{m as J,g as X}from"./DeleteSidebarListElement.vue-BGOmXf3V.js";import{_ as Z,f as ee}from"./SidebarListElement.vue-B4C9MU5x.js";import{x as te,a as ae}from"./ViewLayoutContent.vue-wBu05qAZ.js";import{A as re}from"./Form.vue-arFWBq4n.js";const le={class:"divide-0.5 flex w-full divide-x"},se=N({__name:"ServerForm",setup(L){const{activeRouterParams:d,activeWorkspaceCollections:x}=R(),{collections:h,servers:m,serverMutators:k}=V(),g=[{label:"URL",key:"url",placeholder:"https://void.scalar.com/api"},{label:"Label",key:"description",placeholder:"Production"}],v=z(()=>{const s=h[d.value.collection];if(!s)return;const c=typeof d.value.servers=="string"&&d.value.servers==="default"?s.servers[0]:s.servers.find(C=>C===d.value.servers);if(c)return m[c]}),y=(s,c)=>{!x.value||!v.value||k.edit(v.value.uid,s,c)};return(s,c)=>(l(),b("div",le,[v.value?(l(),p(re,{key:0,data:v.value,onUpdate:y,options:g,title:"Server"},null,8,["data"])):B("",!0)]))}}),oe={class:"flex-1"},ie=["onClick"],ne={class:"flex h-5 max-w-[14px] items-center justify-center pr-px"},ce={class:"line-clamp-1 w-full break-all text-left font-medium"},xe=N({__name:"Servers",setup(L){const{activeWorkspaceCollections:d,activeWorkspace:x,activeRouterParams:h}=R(),{servers:m,events:k,serverMutators:g}=V(),{push:v,resolve:y}=O(),{collapsedSidebarFolders:s,toggleSidebarFolder:c}=q(),C=t=>s[t];function w(t){k.commandPalette.emit({commandName:"Add Server",metaData:{parentUid:t}})}const P=z(()=>d.value.filter(t=>{var o;return((o=t.info)==null?void 0:o.title)!=="Drafts"})),I=(t,o,e)=>{var f;const a={name:"servers",params:{[S.Workspace]:(f=x.value)==null?void 0:f.uid,[S.Collection]:e,[S.Servers]:o}};t.metaKey?window.open(y(a).href,"_blank"):v(a)},U=t=>g.delete(t,h.value.collection),W=z(()=>Object.keys(m).length>0);return(t,o)=>(l(),p(ae,null,{default:n(()=>[i(r(J),{title:"Servers"},{content:n(()=>[u("div",oe,[i(Z,null,{default:n(()=>[(l(!0),b($,null,A(P.value,e=>{var f;return l(),b("li",{key:e.uid,class:"gap-1/2 flex flex-col"},[u("button",{class:"hover:bg-b-2 group flex w-full items-center gap-1.5 break-words rounded p-1.5 text-left text-sm font-medium",type:"button",onClick:a=>r(c)(e.uid)},[u("span",ne,[i(r(Y),{class:"text-sidebar-c-2 size-3.5 min-w-3.5 stroke-2 group-hover:hidden",src:e["x-scalar-icon"]||"interface-content-folder"},null,8,["src"]),u("div",{class:j({"rotate-90":r(s)[e.uid]})},[i(r(_),{class:"text-c-3 hover:text-c-1 hidden text-sm group-hover:block",icon:"ChevronRight",size:"md"})],2)]),u("span",ce,G(((f=e.info)==null?void 0:f.title)??""),1),i(r(F),{class:"hover:bg-b-3 hover:text-c-1 hidden aspect-square h-fit px-0.5 py-0 group-hover:block group-focus-visible:opacity-100 group-has-[:focus-visible]:opacity-100",size:"sm",variant:"ghost",onClick:Q(a=>w(e.uid),["stop","prevent"])},{default:n(()=>[i(r(_),{icon:"Add",size:"md",thickness:"2"})]),_:2},1032,["onClick"])],8,ie),K(u("div",{class:j({"before:bg-border before:z-1 gap-1/2 relative mb-[.5px] flex flex-col before:pointer-events-none before:absolute before:left-3 before:top-0 before:h-[calc(100%_+_.5px)] before:w-[.5px] last:mb-0 last:before:h-full":Object.keys(e.servers||{}).length>0})},[(l(!0),b($,null,A(e.servers,a=>{var D;return l(),p(ee,{key:a,class:"[&>a]:pl-[1.625rem]",collectionId:e.uid,isDeletable:!0,type:"servers",variable:{name:((D=r(m)[a])==null?void 0:D.url)??"",uid:a},onClick:M=>I(M,a,e.uid),onDelete:U},null,8,["collectionId","variable","onClick"])}),128)),Object.keys(e.servers||{}).length===0?(l(),p(r(F),{key:0,class:"text-c-1 hover:bg-b-2 mb-[.5px] flex h-8 w-full justify-start gap-1.5 py-0 pl-6 text-xs",variant:"ghost",onClick:a=>w(e.uid)},{default:n(()=>[i(r(_),{icon:"Add",size:"sm"}),o[0]||(o[0]=u("span",null,"Add Server",-1))]),_:2},1032,["onClick"])):B("",!0)],2),[[T,C(e.uid)]])])}),128))]),_:1})])]),button:n(()=>[i(X,{click:w},{title:n(()=>o[1]||(o[1]=[E(" Add Server ")])),_:1})]),_:1}),i(te,{class:"flex-1"},{default:n(()=>[W.value?(l(),p(se,{key:0})):(l(),p(H,{key:1}))]),_:1})]),_:1}))}});export{xe as default};
