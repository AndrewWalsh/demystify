import{d as w,aI as N,ah as B,c as g,a5 as D,z as f,B as v,C as n,Q as h,r as I,w as S,D as m,$ as x,u as _,aK as j,aL as z,a3 as L,az as O,b4 as R,bg as P,o as G,L as Q,K as M,F as T,R as W,an as Y,aG as Z}from"./index-Bvmx_tWR.js";import{r as q}from"./EmptyState.vue-C5gmE932.js";import{m as H,g as J}from"./DeleteSidebarListElement.vue-D239cwOv.js";import{_ as X,f as ee}from"./SidebarListElement.vue-Cbp3lJ8K.js";import{x as ae,a as oe}from"./ViewLayoutContent.vue-E7i3OHQE.js";import{A as le}from"./Form.vue-mCbMitUN.js";import{h as se,b as y}from"./CommandActionInput.vue-9Lk-d5-d.js";const te=w({__name:"CookieForm",setup(C){const{activeCookieId:d}=N(),{cookies:p,cookieMutators:k}=B(),a=[{label:"Name",key:"name",placeholder:"session_id"},{label:"Value",key:"value",placeholder:"my-cookie-session-id"},{label:"Domain",key:"domain",placeholder:"example.com"}],c=g(()=>p[d.value]||D.parse({name:"",value:"",domain:"",path:""})),b=(t,e)=>{k.edit(d.value,t,e)};return(t,e)=>(v(),f(le,{data:c.value,onUpdate:b,options:a},{title:n(()=>e[0]||(e[0]=[h("span",{class:"text-c-2"},"Edit Cookie",-1)])),_:1},8,["data"]))}}),ie={class:"flex gap-2 h-8 items-start text-sm"},ue={class:"flex gap-2 h-8 items-start text-sm"},ne={class:"flex gap-2 h-8 items-start text-sm"},de=w({__name:"CookieModal",props:{state:{}},emits:["cancel","submit"],setup(C,{emit:d}){const p=C,k=d,a=I({name:"",value:"",domain:""}),{toast:c}=z(),b=()=>{if(!a.value.name||!a.value.value){c("Please fill in all fields before adding a cookie.","error");return}k("submit",a.value),p.state.hide()};return S(()=>p.state.open,t=>{t&&(a.value={name:"",value:"",domain:""})}),(t,e)=>(v(),f(_(j),{size:"xs",state:t.state,title:"Add Cookie"},{default:n(()=>[m(se,{disabled:!a.value.name||!a.value.value,onCancel:e[3]||(e[3]=u=>k("cancel")),onSubmit:b},{submit:n(()=>e[7]||(e[7]=[x("Add Cookie")])),default:n(()=>[h("div",ie,[e[4]||(e[4]=x(" Name: ")),m(y,{modelValue:a.value.name,"onUpdate:modelValue":e[0]||(e[0]=u=>a.value.name=u),autofocus:"",class:"!p-0",placeholder:"session_id"},null,8,["modelValue"])]),h("div",ue,[e[5]||(e[5]=x(" Value: ")),m(y,{modelValue:a.value.value,"onUpdate:modelValue":e[1]||(e[1]=u=>a.value.value=u),autofocus:"",class:"!p-0",placeholder:"my-cookie-session-id"},null,8,["modelValue"])]),h("div",ne,[e[6]||(e[6]=x(" Domain: ")),m(y,{modelValue:a.value.domain,"onUpdate:modelValue":e[2]||(e[2]=u=>a.value.domain=u),autofocus:"",class:"!p-0",placeholder:"example.com"},null,8,["modelValue"])])]),_:1},8,["disabled"])]),_:1},8,["state"]))}}),ce=L(de,[["__scopeId","data-v-c25da223"]]),me={class:"flex-1"},re={class:"relative mb-[.5px] last:mb-0"},_e=w({__name:"Cookies",setup(C){const{cookies:d,cookieMutators:p,events:k,workspaceMutators:a}=B(),{activeWorkspace:c,activeCookieId:b}=N(),t=O(),e=R(),u=P(),U=l=>{var i,o;const s=D.parse({name:l.name,value:l.value,domain:l.domain,path:"/"});p.add(s),a.edit((i=c.value)==null?void 0:i.uid,"cookies",[...((o=c.value)==null?void 0:o.cookies)??[],s.uid]),t.push({name:"cookies",params:{cookies:s.uid}})},A=l=>{var i,o;p.delete(l),a.edit((i=c.value)==null?void 0:i.uid,"cookies",[...(((o=c.value)==null?void 0:o.cookies)??[]).filter(r=>r!==l)]);const s=Object.values(d).filter(r=>r.uid!==l);if(s.length>0){const r=s[s.length-1];r&&t.push(r.uid)}else t.push({name:"cookies",params:{[Z.Cookies]:"default"}})},V=()=>{u.show()},$=l=>{l!=null&&l.createNew&&e.name==="cookies"&&V()},K=(l,i)=>{var o;const s={name:"cookies",params:{workspace:((o=c.value)==null?void 0:o.uid)??"default",cookies:i}};if(l.metaKey){const r=t.resolve(s).href;window.open(r,"_blank");return}t.push(s)};G(()=>k.hotKeys.on($)),Q(()=>k.hotKeys.off($));const E=g(()=>d[b.value]),F=g(()=>Object.keys(d).length>0&&E.value);return(l,i)=>(v(),f(oe,null,{default:n(()=>[m(_(H),{title:"Cookies"},{content:n(()=>[h("div",me,[m(X,null,{default:n(()=>[(v(!0),M(T,null,W(Object.values(_(d)),o=>(v(),M("li",{key:o.uid,class:"gap-1/2 flex flex-col"},[h("div",re,[(v(),f(ee,{key:o.uid,class:"text-xs",isDeletable:"",type:"cookies",variable:{name:o.name,uid:o.uid},warningMessage:"Are you sure you want to delete this cookie?",onClick:Y(s=>K(s,o.uid),["prevent"]),onDelete:s=>A(o.uid)},null,8,["variable","onClick","onDelete"]))])]))),128))]),_:1})])]),button:n(()=>[m(J,{click:V,hotkey:"N"},{title:n(()=>i[1]||(i[1]=[x(" Add Cookie ")])),_:1})]),_:1}),m(ae,{class:"flex-1"},{default:n(()=>[F.value?(v(),f(te,{key:0})):(v(),f(q,{key:1}))]),_:1}),m(ce,{state:_(u),onCancel:i[0]||(i[0]=o=>_(u).hide()),onSubmit:U},null,8,["state"])]),_:1}))}});export{_e as default};
